<!-- @format -->

<!DOCTYPE html>
<html lang="en">
	<!-- prettier-ignore -->
	<head>
		<meta charset="utf-8" />
		<title>Draft</title>
		<base href="/" />
		<meta name="theme-color" content="#1976d2" />
		<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1"/>
		<meta name="keywords" content="draft, post, share, markdown, youtube, code" />
		<meta name="subject" content="Draft" />
		<meta name="copyright" content="Draft" />
		<meta name="language" content="EN" />
		<meta name="robots" content="index,follow" />
		<meta name="author" content="Denis Yakimenko" />
		<meta name="reply-to" content="mail@draft.app" />
		<meta name="url" content="https://draft.app" />
		<meta name="identifier-URL" content="https://draft.app" />
		<meta name="category" content="Social" />
		<meta name="coverage" content="Worldwide" />
		<meta name="target" content="all" />
		<meta name="MobileOptimized" content="320" />
		<meta name="date" content="Feb. 23, 2021" />
		<link type="image/x-icon" href="favicon.ico" rel="icon" />
		<link href="manifest.webmanifest" rel="manifest" />
		<link href="assets/icons/sprite.svg" rel="prefetch" as="image" />
	</head>
	<body>
		<noscript>
			Please enable JavaScript to continue using this application
		</noscript>
		<div
			class="fixed z-[2] flex h-full w-full items-center justify-center bg-base-100"
			data-loader
		>
			<span class="rounded-box bg-base-200 p-4 text-base-content">
				Loading
			</span>
		</div>
		<div
			class="fixed z-[1] h-full min-h-[800px] w-full"
			data-theme-background="slanted-gradient"
		>
			<!-- prettier-ignore -->
			<svg xmlns='http://www.w3.org/2000/svg' width='100%' height='100%' viewBox='0 0 1600 800' preserveAspectRatio='xMidYMid slice'>
        <rect fill='hsl(var(--b3))' width='1600' height='800'/>
        <g fill-opacity='1'>
          <polygon style="filter: brightness(0.85)" fill='hsl(var(--b3))' points='1600 160 0 460 0 350 1600 50'/>
          <polygon style="filter: brightness(0.80)" fill='hsl(var(--b3))' points='1600 260 0 560 0 450 1600 150'/>
          <polygon style="filter: brightness(0.75)" fill='hsl(var(--b3))' points='1600 360 0 660 0 550 1600 250'/>
          <polygon style="filter: brightness(0.70)" fill='hsl(var(--b3))' points='1600 460 0 760 0 650 1600 350'/>
          <polygon style="filter: brightness(0.50)" fill='hsl(var(--b3))' points='1600 800 0 800 0 750 1600 450'/>
        </g>
      </svg>
		</div>
		<app-root></app-root>
	</body>
	<script type="application/javascript">
		/** Cookie */

		function getCookie(cookieName) {
			let result = {}

			document.cookie.split(";").forEach(function (cookie) {
				let [key, value] = cookie.split("=")

				result[key.trim()] = value
			})

			return result[cookieName]
		}

		/** Theme */

		const getThemeValue = () => {
			const value = getCookie("theme")

			if (!!value && value !== "") {
				return value
			} else {
				return "light"
			}
		}

		const themeValue = getThemeValue()

		document.documentElement.setAttribute("data-theme", themeValue)

		/** Background */

		const getBackgroundValue = () => {
			const value = getCookie("theme-background")

			if (!!value && value !== "") {
				return value
			} else {
				return "slanted-gradient"
			}
		}

		const backgroundElement = document.querySelector("[data-theme-background]")
		const backgroundValue = getBackgroundValue()

		if (backgroundElement.dataset.themeBackground !== backgroundValue) {
			fetch("/assets/backgrounds/" + backgroundValue + ".svg", {
				cache: "force-cache",
			})
				.then((response) => response.text())
				.then((svg) => {
					backgroundElement.innerHTML = svg
					backgroundElement.dataset.themeBackground = backgroundValue
				})
		}

		/** Prism */

		const getPrismValue = () => {
			const value = getCookie("theme-prism")

			if (!!value && value !== "") {
				return value
			} else {
				return "default"
			}
		}

		const prismElement = document.createElement("link")
		const prismValue = "prism-" + getPrismValue() + ".css"

		prismElement.rel = "stylesheet"
		prismElement.href = prismValue
		prismElement.dataset.themePrism = getPrismValue()

		document.head.appendChild(prismElement)
	</script>
</html>
