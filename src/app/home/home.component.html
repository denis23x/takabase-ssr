<!-- @format -->

<ng-container>
	<section class="flex flex-col gap-4">
		<header
			class="rounded-box flex flex-col items-stretch justify-start gap-4 border border-base-content/20 bg-base-100 p-4 shadow-xl"
			itemscope
			itemtype="http://schema.org/Thing"
		>
			<div class="relative sm:divider sm:divider-start sm:mt-2">
				<h1 class="text-3xl text-base-content font-bold" itemprop="headline">The new post platform</h1>
			</div>
			<div class="flex items-start justify-start gap-4">
				<p class="text-base text-base-content/50" itemprop="description">
					<span class="inline">
						Takabase is designed to provide you with an easy-to-use, lightweight app that is highly customizable to your
						preferences.
					</span>
					<span class="hidden sm:inline">
						Whether youâ€™re a writer, or developer, the platform is the perfect tool to bring your ideas to life.
					</span>
				</p>
				<figure class="hidden sm:flex items-start justify-end">
					<i
						class="rounded-box"
						appSvgLogo
						itemprop="image"
						[appSvgLogoIcon]="'takabase'"
						[appSvgLogoSquare]="'64'"
					></i>
				</figure>
			</div>
			<nav
				class="flex flex-wrap items-center justify-start gap-4"
				itemscope
				itemtype="http://schema.org/SiteNavigationElement"
			>
				<a
					class="btn btn-outline btn-success btn-md flex-1"
					title="Registration"
					aria-label="Registration"
					itemprop="url name"
					[routerLink]="'/registration'"
				>
					Registration
				</a>
				<a
					class="btn btn-outline btn-info btn-md flex-1"
					title="Search"
					aria-label="Search"
					itemprop="url name"
					[routerLink]="'/search'"
				>
					Search
				</a>
				<a
					class="btn btn-outline btn-primary btn-md flex-1"
					title="Markdown guide"
					aria-label="Markdown guide"
					itemprop="url name"
					[routerLink]="'/help/markdown'"
				>
					Markdown
				</a>
				<button
					class="btn btn-outline btn-warning btn-md flex-1"
					type="button"
					title="Progressive Web Application"
					aria-label="Progressive Web Application"
					itemprop="url name"
					(click)="appPWAElement.onClick()"
				>
					PWA
				</button>
				<a
					class="btn btn-outline btn-error btn-md flex-1"
					title="Work In Progress"
					aria-label="Work In Progress"
					itemprop="url name"
					[routerLink]="'/help/about'"
				>
					WIP
				</a>
			</nav>
		</header>
		<ul
			class="rounded-box grid grid-cols-12 border border-base-content/20 bg-base-100 shadow-xl"
			itemscope
			itemtype="http://schema.org/ItemList"
		>
			<li
				class="flex flex-col col-span-12 lg:col-span-6 gap-2 border-b lg:border-b-0 lg:border-r border-base-content/20 p-4"
				itemprop="itemListElement"
				itemscope
				itemtype="http://schema.org/ListItem"
			>
				<div class="flex items-center justify-between">
					<h4 class="text-2xl font-bold text-base-content" itemprop="name">Insights</h4>
					<span class="text-sm text-base-content/50">
						{{ appInsightListTime }}
					</span>
				</div>
				<div class="flex items-center justify-between gap-4">
					<p class="text-base text-base-content" itemprop="description">
						Current platform activity, including the total number of public posts, active users, and categories
					</p>
					<i
						class="fill-current text-primary"
						appSvgIcon
						[appSvgIconIcon]="'sliders2-vertical'"
						[appSvgIconSquare]="'2em'"
					></i>
				</div>
			</li>
			@for (appInsight of appInsightList; track appInsight.id) {
				<li
					class="flex flex-col items-center justify-center gap-1 text-center col-span-4 lg:col-span-2 border-r last:border-0 border-base-content/20 p-4"
					itemprop="itemListElement"
					itemscope
					itemtype="http://schema.org/ListItem"
				>
					<h4 class="text-sm uppercase text-base-content" itemprop="name">{{ appInsight.value }}</h4>
					<div class="flex flex-col items-center justify-center gap-1">
						<span
							class="text-3xl text-base-content font-bold"
							appSkeleton
							[ngClass]="{ 'w-9 h-9 rounded-full overflow-hidden': appInsightListSkeletonToggle }"
							[appSkeletonToggle]="appInsightListSkeletonToggle"
						>
							{{ appInsight.countPreceding + appInsight.countFollowing }}
						</span>
						<div
							class="text-xs flex items-center justify-center gap-1"
							appSkeleton
							[appSkeletonToggle]="appInsightListSkeletonToggle"
							[ngClass]="appInsightListChangeState[appInsight.changeState].classList"
						>
							<span class="block whitespace-nowrap">
								{{ appInsightListChangeState[appInsight.changeState].character }} {{ appInsight.countFollowing }}
							</span>
							<span class="block">({{ appInsight.changePercent | number: "1.0-1" }}%)</span>
						</div>
					</div>
				</li>
			}
		</ul>
		<main
			class="rounded-box sm:rounded-none border sm:border-none border-base-content/20 w-full overflow-auto sm:overflow-visible"
			itemscope
			itemtype="http://schema.org/Thing"
		>
			<div class="flex items-center justify-between sm:hidden bg-base-100 border-b border-base-content/20 p-4">
				<h4 class="text-2xl font-bold text-base-content" itemprop="name">Highlights</h4>
				<nav class="join">
					@for (appHighlight of [1, 2, 3]; track $index) {
						<button
							class="join-item btn btn-sm"
							[title]="'Go to ' + appHighlight"
							[attr.aria-label]="'Go to ' + appHighlight"
							[class.btn-active]="appHighlightListIndex === appHighlight"
							(click)="appHighlightListIndex = appHighlight"
						>
							{{ appHighlight }}
						</button>
					}
				</nav>
			</div>
			<ul class="grid grid-cols-1 sm:grid-cols-3 sm:gap-4" itemscope itemtype="http://schema.org/ItemList">
				@for (appHighlight of appHighlightList; track appHighlight.id; let i = $index) {
					<li
						class="sm:rounded-box hidden sm:flex flex-col gap-2 col-span-1 border-t [&:nth-child(3n+1)]:border-t-0 sm:border border-base-content/20 bg-base-100 sm:shadow-xl p-4"
						itemprop="itemListElement"
						itemscope
						itemtype="http://schema.org/ListItem"
						[class.!flex]="i + 1 <= 3 * appHighlightListIndex && i + 1 > 3 * appHighlightListIndex - 3"
					>
						<div class="flex items-center justify-start gap-4">
							<i
								class="fill-current text-secondary"
								appSvgIcon
								[appSvgIconIcon]="$any(appHighlight.icon)"
								[appSvgIconSquare]="'1.25em'"
							></i>
							<span class="text-base font-bold text-base-content" itemprop="name">
								{{ appHighlight.title }}
							</span>
						</div>
						<p class="text-sm text-base-content/50" itemprop="description">
							{{ appHighlight.description }}
						</p>
					</li>
				}
			</ul>
		</main>
	</section>
	<div appPWA #appPWAElement></div>
</ng-container>
