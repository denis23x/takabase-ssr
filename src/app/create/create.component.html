<ng-container>
  <section class="page-create grid grid-cols-1 grid-rows-1 gap-4 px-4">
    <header class="header bg-primary-2 z-20 sticky top-0 px-4 -mx-4">
      <div
        class="border-b border-primary-4 py-4"
        appMarkdown
        [appScrollSync]="editorScrollSync"
        [appTextareaId]="'textarea'"
        [appPreviewId]="'preview'">
      </div>
    </header>
    <div class="content mb-4">
      <div class="splitter grid mb-4">
        <div class="editor relative">
          <form
            class="block"
            autocomplete="off"
            [formGroup]="bodyForm">
            <fieldset
              *ngIf="bodyForm.get('body') as body"
              [disabled]="bodyFormIsSubmitted">
              <label class="flex">
                <textarea
                  id="textarea"
                  class="form-control bg-primary-3 resize-none overflow-auto p-4"
                  [class.whitespace-pre]="editorWhitespace"
                  formControlName="body"
                  placeholder="Type a post.."
                  aria-label="Editor">{{body.value}}
                </textarea>
              </label>
            </fieldset>
          </form>
          <div class="layout flex items-center justify-between">
            <ul class="flex lg:flex-col items-center">
              <li class="inline-block">
                <button
                  class="fill-current text-secondary-1 hover:text-info-1 p-2"
                  [class.text-info-1]="editorWhitespace"
                  type="button"
                  aria-label="Whitespace"
                  appSvgIcon
                  [appIcon]="'text-left'"
                  [appSquare]="'1.5em'"
                  (click)="editorWhitespace = !editorWhitespace">
                </button>
              </li>
              <li class="inline-block">
                <button
                  class="fill-current text-secondary-1 hover:text-info-1 p-2.5"
                  type="button"
                  aria-label="Preview"
                  appSvgIcon
                  [appIcon]="'eye'"
                  [appSquare]="'1.25em'">
                </button>
              </li>
              <li class="inline-block">
                <button
                  class="fill-current text-secondary-1 hover:text-info-1 p-2.5"
                  [class.text-info-1]="editorScrollSync"
                  type="button"
                  aria-label="Scroll Sync"
                  appSvgIcon
                  [appIcon]="'mouse2'"
                  [appSquare]="'1.25em'"
                  (click)="editorScrollSync = !editorScrollSync">
                </button>
              </li>
            </ul>
            <ul class="flex lg:flex-col items-center">
              <li class="inline-block">
                <a
                  class="block fill-current text-secondary-1 hover:text-info-1 p-2.5"
                  aria-label="Help"
                  target="_blank"
                  href="https://en.wikipedia.org/wiki/Markdown"
                  rel="noopener"
                  appSvgIcon
                  [appIcon]="'question-circle'"
                  [appSquare]="'1.25em'">
                </a>
              </li>
            </ul>
          </div>
        </div>
        <div class="hidden lg:flex flex-col items-center justify-between self-center p-2" #gutter>
          <button
            class="fill-current text-secondary-1 opacity-50 cursor-col-resize"
            type="button"
            aria-label="Grip"
            appSvgIcon
            [appIcon]="'grip-vertical'"
            [appSquare]="'1.5em'">
          </button>
        </div>
        <div class="flex lg:hidden items-center justify-center self-center p-2">
          <button
            class="fill-current text-secondary-1 opacity-50 cursor-row-resize"
            type="button"
            aria-label="Grip"
            appSvgIcon
            [appIcon]="'grip-horizontal'"
            [appSquare]="'1.5em'">
          </button>
        </div>
        <article
          id="preview"
          class="preview markdown-html bg-primary-3 border border-primary-4 rounded-md overflow-auto p-4"
          [class.opacity-50]="bodyFormIsSubmitted">
        </article>
      </div>
      <button
        class="btn btn-success block w-full"
        type="button"
        aria-label="Next"
        [disabled]="bodyForm.invalid || bodyFormIsSubmitted"
        (click)="onSubmitBodyForm()">Next
      </button>
    </div>
  </section>
  <app-overlay *ngIf="bodyFormIsSubmitted">
    <app-post
      [appCategoryList]="categoryList"
      (submitPost)="onSubmitPostForm($event)"
      (closed)="bodyFormIsSubmitted = !bodyFormIsSubmitted"
      slot="content">
    </app-post>
  </app-overlay>
</ng-container>
