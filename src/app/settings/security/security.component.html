<section class="bg-primary-3 flex flex-col space-y-4 border border-primary-4 rounded-md w-full p-4">
  <div class="flex flex-col space-y-4">
    <div class="flex flex-col">
      <div class="text-secondary-1">Current session</div>
      <div class="text-secondary-2 text-sm">You currently logged in with this session</div>
    </div>
    <ng-container
      *ngIf="!!sessionCurrent"
      [ngTemplateOutlet]="sessionTemplate"
      [ngTemplateOutletContext]="{ session: sessionCurrent }">
    </ng-container>
  </div>
  <div class="flex flex-col border-t border-primary-4 pt-4" *ngIf="!!sessionList.length">
    <div class="flex flex-col">
      <div class="text-secondary-1">Active sessions</div>
      <div class="text-secondary-2 text-sm mb-4">Other sessions, you can terminate them from here, undefined information can be risky for you account</div>
    </div>
    <ul class="border border-primary-4 rounded-md px-4">
      <li class="flex items-center justify-between space-x-4 border-b border-primary-4 last:border-b-0 py-4" *ngFor="let session of sessionList">
        <ng-container [ngTemplateOutlet]="sessionTemplate" [ngTemplateOutletContext]="{ session }"></ng-container>
        <button
          class="fill-current opacity-25 hover:opacity-100 text-secondary-1 hover:text-danger-1 cursor-pointer p-2"
          type="button"
          aria-label="Terminate session"
          (click)="onSessionTerminate(session.id)"
          appSvgIcon
          [appIcon]="'x-lg'"
          [appSquare]="'1rem'">
        </button>
      </li>
    </ul>
  </div>
  <ng-template #sessionTemplate let-session="session">
    <div class="flex justify-start items-center space-x-4">
      <div class="flex items-center justify-center" [ngSwitch]="session.ua.device.type">
        <app-svg-icon
          class="fill-current text-secondary-1"
          *ngSwitchCase="undefined"
          [appIcon]="'display'"
          appSquare="24">
        </app-svg-icon>
        <app-svg-icon
          class="fill-current text-secondary-1"
          *ngSwitchCase="'mobile'"
          [appIcon]="'phone'"
          appSquare="24">
        </app-svg-icon>
        <app-svg-icon
          class="fill-current text-secondary-1"
          *ngSwitchCase="'smarttv'"
          [appIcon]="'tv'"
          appSquare="24">
        </app-svg-icon>
        <app-svg-icon
          class="fill-current text-secondary-1"
          *ngSwitchCase="'tablet'"
          [appIcon]="'tablet'"
          appSquare="24">
        </app-svg-icon>
        <app-svg-icon
          class="fill-current text-secondary-1"
          *ngSwitchDefault
          [appIcon]="'question-circle'"
          appSquare="24">
        </app-svg-icon>
      </div>
      <div class="flex flex-col leading-tight">
        <p class="flex items-center justify-start space-x-1" *ngIf="session.ua as ua">
          <span class="block" [class.text-danger-1]="!ua.os.name">{{ua.os.name || 'Undefined'}}</span>
          <small class="block text-secondary-2">{{ua.browser.name}} {{ua.browser.version}}</small>
        </p>
        <p class="block" *ngIf="session.ip as ip">
          <small class="text-secondary-2">{{ip.country || 'Undefined'}}, {{ip.city || ip.ip}}</small>
        </p>
      </div>
    </div>
  </ng-template>
</section>
