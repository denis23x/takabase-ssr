<!-- @format -->

<app-overlay (clicked)="closed.emit(false)">
	<section
		class="pointer-events-none absolute inset-0 flex items-center justify-center p-4"
		slot="content"
	>
		<form
			class="bg-primary-3 pointer-events-auto flex max-h-full w-11/12 max-w-full flex-col space-y-4 rounded-lg p-4 shadow-lg sm:w-96"
			autocomplete="off"
			[formGroup]="categoryForm"
			(ngSubmit)="onSubmitCategoryForm()"
		>
			<div
				class="border-primary-4 flex items-center justify-between border-b pb-2"
			>
				<span class="text-secondary-1 block text-xl font-medium leading-9"
					>Create category</span
				>
				<button
					class="text-secondary-1 hover:text-danger-1 fill-current p-2 opacity-25 hover:opacity-100"
					type="button"
					aria-label="Close"
					appSvgIcon
					[appIcon]="'x-lg'"
					[appSquare]="'1rem'"
					(click)="closed.emit(false)"
				></button>
			</div>
			<fieldset
				class="flex flex-col space-y-4"
				[disabled]="categoryFormIsSubmitted"
			>
				<fieldset
					class="flex flex-col space-y-2"
					*ngIf="categoryForm.get('name') as name"
				>
					<label class="text-secondary-2 block text-sm" for="name">Name</label>
					<input
						class="bg-primary-2 form-control truncate"
						id="name"
						type="text"
						aria-label="Name"
						formControlName="name"
						placeholder="Name"
					/>
					<label
						class="text-danger-1 mt-2 block text-sm"
						for="name"
						*ngIf="name.touched && !!name.errors"
						[ngSwitch]="true"
					>
						<ng-container *ngSwitchCase="!!name.errors.required"
							>Required</ng-container
						>
						<ng-container *ngSwitchCase="!!name.errors.minlength"
							>Min length
							{{ name.errors.minlength["requiredLength"] }}
							characters</ng-container
						>
						<ng-container *ngSwitchCase="!!name.errors.maxlength"
							>Max length
							{{ name.errors.maxlength["requiredLength"] }}
							characters</ng-container
						>
					</label>
					<p class="text-secondary-2 text-sm">
						You can change category name later
					</p>
				</fieldset>
				<button
					class="md btn btn-success w-full"
					type="submit"
					aria-label="Submit"
					[disabled]="categoryForm.invalid || categoryFormIsSubmitted"
				>
					Submit
				</button>
			</fieldset>
		</form>
	</section>
</app-overlay>
