<ng-container>
  <div class="flex justify-between items-center border border-primary-4 bg-primary-3 rounded-md">
    <ul class="flex justify-start items-center overflow-auto px-1">
      <li class="inline-block">
        <button
          class="fill-current text-secondary-1 hover:text-info-1 p-2.5"
          type="button"
          aria-label="Undo"
          title="Undo"
          [disabled]="!history$.getValue().length"
          (click)="onBack()"
          appSvgIcon
          [appIcon]="'arrow-left'">
        </button>
      </li>
      <li class="inline-block" *ngFor="let control of controlList">
        <button
          class="fill-current text-secondary-1 hover:text-info-1 p-2.5"
          type="button"
          [attr.aria-label]="control.label"
          [attr.title]="control.label"
          (click)="onControl(control)"
          appSvgIcon
          [appIcon]="control.icon">
        </button>
      </li>
    </ul>
    <app-dropdown
      class="flex relative"
      *ngIf="{ value: false } as active"
      (toggled)="active.value = $event">
      <button
        class="fill-current text-secondary-1 hover:text-info-1 p-2"
        [class.text-info-1]="active.value"
        type="button"
        aria-label="Menu"
        appSvgIcon
        [appIcon]="'list'"
        [appSquare]="'1.5rem'"
        slot="toggle">
      </button>
      <div class="absolute z-30 top-full right-0 flex flex-col items-end -mt-2" slot="content">
        <div class="w-3 overflow-hidden inline-block mx-3.5">
          <div class="h-2 w-2 bg-primary-2 rotate-45 origin-bottom-left"></div>
        </div>
        <ul class="flex flex-col bg-primary-2 rounded-md shadow-lg py-2">
          <li class="block">
            <a
              class="block text-info-1 hover:underline hover:bg-primary-1 whitespace-nowrap whitespace-nowrap w-full py-2 px-4"
              target="_blank"
              href="https://github.com/markdown-it"
              rel="noopener"
              aria-label="markdown-it">markdown-it
            </a>
          </li>
        </ul>
      </div>
    </app-dropdown>
  </div>
  <app-overlay *ngIf="urlModal" (closed)="onCloseUrlForm()">
    <div class="absolute inset-0 flex justify-center items-center pointer-events-none p-4">
      <form
        class="max-h-full max-w-full w-full md:w-128 flex flex-col space-y-4 bg-primary-3 rounded-lg shadow-lg pointer-events-auto p-4"
        [formGroup]="urlForm"
        (ngSubmit)="onSubmitUrlForm()"
        autocomplete="off">
        <div class="flex justify-between items-center border-b border-primary-4 pb-2">
          <span class="block text-xl text-secondary-1 font-medium leading-9">Add {{urlFormControl.label}}</span>
          <button
            class="fill-current opacity-25 hover:opacity-100 text-secondary-1 hover:text-danger-1 p-2"
            type="button"
            aria-label="Close"
            (click)="onCloseUrlForm()"
            appSvgIcon
            [appIcon]="'x-lg'"
            [appSquare]="'1rem'">
          </button>
        </div>
        <fieldset [disabled]="urlFormIsSubmitted">
          <fieldset class="flex flex-col space-y-2" *ngIf="urlForm.get('url') as url">
            <label class="block text-secondary-2 text-sm" for="url">URL address</label>
            <input
              id="url"
              type="text"
              class="form-control bg-primary-2 truncate"
              formControlName="url"
              placeholder="URL address"
              aria-label="Url">
            <label class="block text-danger-1 text-sm" for="url" *ngIf="url.touched && url.errors" [ngSwitch]="true">
              <ng-container *ngSwitchCase="!!url.errors.required">Required</ng-container>
              <ng-container *ngSwitchCase="!!url.errors.customValidator">Url does not match pattern</ng-container>
            </label>
          </fieldset>
        </fieldset>
        <div class="flex flex-col space-y-2">
          <button
            class="btn btn-success md w-full"
            type="submit"
            aria-label="Submit"
            [disabled]="urlForm.invalid || urlFormIsSubmitted">Submit
          </button>
          <ng-container *ngIf="urlFormControl.key === 'url-image'">
            <div class="flex justify-center items-center">
              <hr class="border-primary-4 w-full">
              <span class="block text-secondary-2 text-sm whitespace-nowrap mx-2">OR</span>
              <hr class="border-primary-4 w-full">
            </div>
            <button
              class="btn btn-info md w-full"
              type="button"
              aria-label="Upload">Upload
            </button>
          </ng-container>
        </div>
      </form>
    </div>
  </app-overlay>
</ng-container>
