<!-- @format -->

<ng-container>
	<div class="grid gap-4">
		@if (categoryList.length) {
			<ul class="grid grid-cols-1 grid-rows-none gap-4 sm:grid-cols-2 lg:grid-cols-3">
				@for (category of categoryList; track i; let i = $index) {
					<li
						class="block"
						appCardCategory
						[ngClass]="category.description ? 'row-span-6' : 'row-span-3'"
						[appCardCategoryCategory]="category"
						[appCardCategorySkeletonToggle]="categoryListSkeletonToggle"
					></li>
					@if (i === 10 || i === 20 || i === 30) {
						<li class="block row-span-6" appAd></li>
					}
				}
			</ul>
			@defer (on idle; prefetch on timer(1s)) {
				@if (!categoryListSkeletonToggle) {
					<div
						class="block empty:hidden"
						appListLoadMore
						[appListLoadMoreIsLoading]="categoryListIsLoading$ | async"
						[appListLoadMoreSearchResponse]="categoryListSearchResponse"
						(appLoadMoreToggle)="getCategoryList(true)"
					></div>
				}
			}
		} @else {
			<div class="block" appListMock [appListMockTemplate]="'search-category-not-found'"></div>
		}
	</div>
</ng-container>
