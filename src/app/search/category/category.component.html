<!-- @format -->

<ng-container>
	<ng-container *ngIf="!!categoryList.length; else categoryListEmptyTemplate">
		<ul
			class="grid grid-cols-1 grid-rows-none gap-4 sm:grid-cols-2 lg:grid-cols-3"
		>
			<li
				class="rounded-box flex flex-col space-y-4 border border-base-content/20 bg-base-100 p-4 shadow-xl"
				*ngFor="let category of categoryList"
			>
				<div class="flex flex-col">
					<!-- prettier-ignore -->
					<a
            class="link text-xl font-bold"
            [routerLink]="[(category.user | userUrl), 'category', category.id]"
            [attr.aria-label]="category.name"
          >
            {{ category.name }}
          </a>
					<span class="text-sm text-base-content/50">
						{{ category.user.name }}
					</span>
				</div>
				<p class="alert inline" *ngIf="!!category.description">
					<span class="line-clamp-2">{{ category.description }}</span>
				</p>
			</li>
		</ul>
		<button
			class="btn-primary btn mt-4 w-full"
			type="button"
			aria-label="Load more"
			*ngIf="categoryListHasMore"
			(click)="onCategoryListLoadMore()"
		>
			Load more
		</button>
	</ng-container>
	<ng-template #categoryListEmptyTemplate>
		<ng-container [ngSwitch]="categoryListLoading | async">
			<div class="flex flex-col items-center space-y-4" *ngSwitchDefault>
				<i
					class="fill-current text-base-content"
					appSvgIcon
					[appIcon]="'robot'"
					[appSquare]="'3em'"
				></i>
				<div class="text-center">
					<p class="text-xl font-bold">
						<span class="text-base-content">Categories</span>
						<span class="text-error"> not found</span>
					</p>
					<a
						class="link text-sm"
						title="Create category"
						aria-label="Create category"
						[routerLink]="['/create']"
					>
						Create your category
					</a>
				</div>
			</div>
			<div class="flex flex-col items-center" *ngSwitchCase="true">
				<progress class="progress progress-primary my-5 w-56"></progress>
				<span class="text-xl font-bold text-base-content">Loading</span>
			</div>
		</ng-container>
	</ng-template>
</ng-container>
