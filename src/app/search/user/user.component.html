<!-- @format -->

<ng-container>
	<ng-container *ngIf="!!abstractList.length; else abstractListEmptyTemplate">
		<ul
			class="grid grid-cols-2 grid-rows-none gap-4 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5"
		>
			<li
				class="rounded-box flex flex-col space-y-2 border border-base-content/20 bg-base-100 p-4 shadow-xl"
				*ngFor="let user of abstractList"
			>
				<a
					class="avatar aspect-square"
					[routerLink]="[user | userUrl]"
					[attr.aria-label]="user.name"
					[title]="user.name"
				>
					<figure
						class="h-full max-h-full w-full max-w-full rounded-btn relative overflow-hidden"
						appAvatar
						[appUser]="user"
					></figure>
				</a>
				<div class="flex flex-col text-center">
					<a
						class="link w-full truncate text-xl font-bold"
						[routerLink]="[user | userUrl]"
						[attr.aria-label]="user.name"
					>
						{{ user.name }}
					</a>
					<time
						class="text-sm text-base-content/50"
						[attr.datetime]="user.createdAt | dayjs: 'format' : 'YYYY-M-D'"
					>
						{{ user.createdAt | dayjs: "fromX" }}
					</time>
				</div>
			</li>
		</ul>
		<ng-container *ngIf="!abstractListLoadingPageScrollInfinite">
			<button
				class="btn-primary btn mt-4 w-full"
				type="button"
				aria-label="Load more"
				*ngIf="abstractListHasMore"
				(click)="getAbstractListLoadMore()"
			>
				Load more
			</button>
		</ng-container>
	</ng-container>
	<ng-template #abstractListEmptyTemplate>
		<ng-container [ngSwitch]="abstractListLoading$ | async">
			<div class="flex flex-col items-center space-y-4" *ngSwitchDefault>
				<i
					class="fill-current text-base-content"
					appSvgIcon
					[appIcon]="'exclamation-circle'"
					[appSquare]="'3em'"
				></i>
				<div class="text-center">
					<p class="text-xl font-bold text-base-content">
						Users <span class="text-error">not found</span>
					</p>
					<a
						class="link text-sm"
						title="Registration"
						aria-label="Registration"
						[routerLink]="['/registration']"
					>
						Registration
					</a>
				</div>
			</div>
			<div class="flex flex-col items-center" *ngSwitchCase="true">
				<progress class="progress progress-primary my-5 w-56"></progress>
				<span class="text-xl font-bold text-base-content">Loading</span>
			</div>
		</ng-container>
	</ng-template>
	<div class="block">
		<router-outlet></router-outlet>
	</div>
</ng-container>
